3 OVERVIEW OF ARIES

本章节的主要是对Aries协议的概述，它恰如其分的满足了我们在第二节设定的那些目标。像延迟恢复，选择恢复，重启恢复时的并发模型，等等，将会在该论文的其他章节进行讨论。

在（进程，事务，系统，介质）发生奔溃情况下，ARIES保证了事务的原子性和持久性。为此，ARIES通过使用日志先行（WAL）的方式来跟踪对数据库所做的变更操作。除了记录日志，以一个影响页为基准，在事务执行更新的时候，ARIES同样也会记录（通常使用补偿日志记录CLRs[compensation log records]）事务的部分或者全部回滚的操作。图3给出了一种部分回滚的例子，该事务先执行了3次操作，然后回滚了2个，接着继续执行。由于有两个变更的undo,会写两个CLRs。在ARIES中，CLRs都是redo-only日志记录。通过合理的将CLRs和日志记录串连起来，就能确定一个有限的日志记录，甚至在重启或者嵌套回滚时重复失效也能如此。与之相反的就是IMS,它可能会执行多次相同的non-CLR，在AS/400, DB2 and NonStop SQL中，除了会多次执行相同的non-CLR，也会undo CLR一次或多次（参考图4）。这已经导致了现实中客户系统的一系列问题。

在ARIES中，如图5所示，当一条日志记录的undo触发了一个CLR的写入，该CLR除了包含这个对redo操作的补偿信息外，它同样会包含一个UndoNxtLSN来指向这个条回滚日志的predecessor。